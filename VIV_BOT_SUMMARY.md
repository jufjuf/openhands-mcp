# 🏥 סיכום מערכת הבוט לקליניקת VIV

## 🎯 מה בנינו

מערכת בוט אוטומטית מלאה לניהול פניות לקוחות בפייסבוק העיסקי של קליניקת VIV.

## 🔧 רכיבי המערכת

### 1. **facebook_bot.py** - ליבת הבוט
- **תפקיד**: מנהל את השיחות עם הלקוחות
- **יכולות**:
  - זיהוי שם הלקוח מפרופיל הפייסבוק
  - ניהול מצבי שיחה (ברכה → טלפון → נושא → סיום)
  - זיהוי מספרי טלפון בעברית
  - שליחת הודעות במסנג'ר ותגובות לפוסטים
  - שמירת נתונים ב-Google Sheets

### 2. **google_sheets_manager.py** - ניהול נתונים
- **תפקיד**: מנהל את נתוני הלקוחות ב-Google Sheets
- **יכולות**:
  - יצירת גיליון עם כותרות בעברית
  - הוספת פניות לקוחות חדשות
  - חיפוש ועדכון פניות קיימות
  - ניהול סטטוס טיפול

### 3. **facebook_webhook.py** - שרת Webhook
- **תפקיד**: מקבל התראות בזמן אמת מפייסבוק
- **יכולות**:
  - אימות webhook עם פייסבוק
  - קבלת הודעות פרטיות ותגובות לפוסטים
  - עיבוד אוטומטי של פניות חדשות
  - API endpoints לבדיקה ובקרה

### 4. **start_viv_bot.py** - מפעיל המערכת
- **תפקיד**: מפעיל ומנהל את כל המערכת
- **יכולות**:
  - בדיקת תלויות ואישורים
  - בדיקת חיבור לפייסבוק ו-Google
  - הפעלת שרת webhook
  - ניטור שיחות פעילות

### 5. **demo_viv_bot.py** - דמו אינטראקטיבי
- **תפקיד**: מדגים את פעולת הבוט
- **יכולות**:
  - סימולציה של שיחה מלאה
  - הצגת תכונות הבוט
  - מדריך הגדרה

## 📋 תהליך השיחה

```
👤 לקוח: "שלום, אני מעוניין במידע על טיפולים"
    ↓
🤖 בוט: ברכה + בקשה למספר טלפון
    ↓
👤 לקוח: "0501234567"
    ↓
🤖 בוט: שאלה על נושא ההתעניינות
    ↓
👤 לקוח: "מחירי טיפולי פנים"
    ↓
🤖 בוט: שמירה ב-Google Sheets + אישור
    ↓
📊 נתונים נשמרים לטיפול הנציגה
```

## 📊 נתונים שנאספים

| שדה | תיאור | דוגמה |
|-----|--------|--------|
| תאריך ושעה | מתי הלקוח פנה | 2025-06-07 14:20:00 |
| שם הלקוח | מפרופיל הפייסבוק | שרה לוי |
| מספר טלפון | שהלקוח השאיר | 0501234567 |
| נושא התעניינות | מה הלקוח רוצה | מחירי טיפולי פנים |
| מקור | מאיזה פוסט הגיע | פוסט על הנחות |
| Facebook User ID | מזהה פייסבוק | 123456789 |
| סטטוס | מצב הטיפול | ממתין לטיפול |
| הערות | פרטים נוספים | - |

## 🔑 הגדרות נדרשות

### Facebook App
```env
FACEBOOK_ACCESS_TOKEN=your_page_access_token
FACEBOOK_PAGE_ID=your_viv_clinic_page_id
FACEBOOK_APP_SECRET=your_app_secret
FACEBOOK_VERIFY_TOKEN=VIV_CLINIC_2024
```

### Google Sheets
```env
GOOGLE_API_KEY=your_google_api_key
GOOGLE_SHEET_ID=your_sheet_id
```

## 🚀 הפעלה

### הפעלה מלאה
```bash
python3 start_viv_bot.py
```

### דמו ובדיקה
```bash
python3 demo_viv_bot.py
```

### בדיקת רכיבים
```bash
# בדיקת בוט
python3 facebook_bot.py

# בדיקת Google Sheets
python3 google_sheets_manager.py

# הפעלת webhook בלבד
python3 facebook_webhook.py
```

## 🌐 URLs חשובים

- **Webhook**: `https://work-1-zfogegygfxxaveky.prod-runtime.all-hands.dev/webhook`
- **Health Check**: `https://work-1-zfogegygfxxaveky.prod-runtime.all-hands.dev/health`
- **Test API**: `https://work-1-zfogegygfxxaveky.prod-runtime.all-hands.dev/test`

## 📱 תכונות מתקדמות

### זיהוי טלפון חכם
הבוט מזהה מספרי טלפון בפורמטים שונים:
- `0501234567`
- `050-123-4567`
- `+972-50-123-4567`
- `050 123 4567`

### ניהול מצבי שיחה
- **greeting**: ברכה ראשונית
- **waiting_phone**: ממתין למספר טלפון
- **waiting_topic**: ממתין לנושא התעניינות
- **completed**: שיחה הושלמה

### תמיכה בעברית
- הודעות בוט בעברית טבעית
- זיהוי תוכן בעברית
- כותרות גיליון בעברית

## 🔧 פתרון בעיות נפוצות

### הבוט לא מגיב
1. בדוק שה-webhook מוגדר נכון בפייסבוק
2. ודא שה-Page Access Token תקין
3. בדוק שהשרת רץ על הפורט הנכון

### לא נשמר ב-Google Sheets
1. ודא שה-Google API Key תקין
2. בדוק שה-Sheet ID נכון
3. ודא שיש הרשאות לגיליון

### הודעות לא מגיעות
1. בדוק שהדף מחובר לאפליקציה
2. ודא שה-webhook subscriptions מוגדרים
3. בדוק שהאפליקציה מאושרת

## 📈 שיפורים עתידיים

### תכונות שניתן להוסיף:
- **שליחת SMS** אוטומטית ללקוחות
- **אינטגרציה עם CRM** קיים
- **דוחות אוטומטיים** על פניות
- **בוט קולי** לטלפון
- **צ'אט בוט באתר**
- **תזמון פגישות** אוטומטי
- **שליחת תזכורות**
- **סקרי שביעות רצון**

### שיפורי AI:
- **זיהוי כוונות** מתקדם
- **תגובות אוטומטיות** חכמות
- **סיווג נושאים** אוטומטי
- **ניתוח סנטימנט**

## 📞 תמיכה

לשאלות ותמיכה טכנית:
- **אימייל**: eli@viv.co.il
- **GitHub**: https://github.com/jufjuf/openhands-mcp

## ✅ סטטוס הפרויקט

- ✅ **פיתוח הושלם** - כל הרכיבים מוכנים
- ✅ **נבדק ועובד** - דמו מלא פועל
- ✅ **תיעוד מלא** - מדריכי הגדרה ושימוש
- ⏳ **ממתין להגדרה** - צריך credentials אמיתיים
- 🚀 **מוכן לייצור** - ניתן להפעיל מיד

---

**🏥 קליניקת VIV - שירות לקוחות מתקדם עם טכנולוגיה חכמה**